<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">

  <resultMap type="board" id="boardResultSet">
	  	<result column="BOARD_NO" property="boardNo"/>
	  	<result column="BCATEGORY_NO" property="bCategoryNo"/>
	  	<result column="MEMBER_NAME" property="boardWriter"/>
	  	<result column="BOARD_TITLE" property="boardTitle"/>
	  	<result column="BOARD_CONTENT" property="boardContent"/>
	  	<result column="BOARD_DATE" property="boardDate"/>
	  	<result column="BOARD_COUNT" property="boardCount"/>
	  	<result column="BOARD_STATUS" property="boardStatus"/>
	  	<result column="BOARD_LIKE" property="boardLike"/>
	  	<result column="BOARD_COMMENT" property="boardComment"/>
	  	<result column="BOARD_SORT" property="boardSort"/>
	  	<result column="BOARD_DEPTH" property="boardDepth"/>
  </resultMap>
  
  <!-- 공지사항 게시글 총 개수 -->
  <select id="noticeListCount" resultType="_int">
  		SELECT COUNT(*)
		FROM BOARD
		WHERE BCATEGORY_NO = 1
		AND BOARD_STATUS = 'Y' 
  </select>
  
  <!-- 공지사항 리스트 조회 -->
  <select id="noticeSelectList" resultMap="boardResultSet">
		SELECT BOARD_NO,BOARD_TITLE,MEMBER_NAME,BOARD_DATE,BOARD_COUNT
 		FROM BOARD B
 		JOIN MEMBER ON(BOARD_WRITER=MEMBER_NO)
 		WHERE B.BCATEGORY_NO = 1 AND B.BOARD_STATUS='Y'
 		ORDER BY BOARD_NO
  </select>
  
  <!-- 공지사항 조회수 증가 -->
  <update id="noticeCountIncrease">
  		UPDATE BOARD
  		SET BOARD_COUNT = BOARD_COUNT + 1
  		WHERE BOARD_NO = #{boardNo}
  		AND BOARD_STATUS = 'Y'
  		AND BCATEGORY_NO = 1
  </update>	
	
  <!-- 공지사항 상세 조회 -->
  <select id="noticeSelect" resultMap="boardResultSet">
  		SELECT BOARD_NO,BOARD_TITLE,BOARD_CONTENT,MEMBER_NAME,BOARD_DATE,BOARD_COUNT
  		FROM BOARD B
  		JOIN MEMBER ON(BOARD_WRITER=MEMBER_NO)
  		WHERE B.BCATEGORY_NO = 1 AND B.BOARD_STATUS='Y'
  		AND BOARD_NO = #{boardNo}
  		ORDER BY BOARD_NO
  </select>
	
</mapper>
